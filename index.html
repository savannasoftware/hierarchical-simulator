<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Hierarchical Data Simulator - Comprehensive Documentation</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
      rel="stylesheet" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet" />
    <style>
      :root {
        --primary-color: #2563eb;
        --secondary-color: #64748b;
        --accent-color: #0f172a;
        --background-color: #ffffff;
        --surface-color: #f8fafc;
        --border-color: #e2e8f0;
        --text-primary: #0f172a;
        --text-secondary: #475569;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --error-color: #ef4444;
        --code-background: #1e293b;
        --sidebar-width: 280px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI',
          Roboto, sans-serif;
        line-height: 1.6;
        color: var(--text-primary);
        background-color: var(--background-color);
      }

      .container {
        display: flex;
        min-height: 100vh;
      }

      /* Sidebar Navigation */
      .sidebar {
        width: var(--sidebar-width);
        background: var(--surface-color);
        border-right: 1px solid var(--border-color);
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        overflow-y: auto;
        z-index: 1000;
        transition: transform 0.3s ease;
      }

      .sidebar-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--border-color);
        background: var(--background-color);
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .sidebar-header h1 {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
      }

      .sidebar-header p {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      .nav-menu {
        padding: 1rem;
      }

      .nav-section {
        margin-bottom: 1.5rem;
      }

      .nav-section-title {
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
        padding: 0 0.75rem;
      }

      .nav-item {
        display: block;
        padding: 0.5rem 0.75rem;
        text-decoration: none;
        color: var(--text-secondary);
        border-radius: 0.375rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        border-left: 3px solid transparent;
      }

      .nav-item:hover {
        background: var(--background-color);
        color: var(--primary-color);
        border-left-color: var(--primary-color);
      }

      .nav-item.active {
        background: var(--primary-color);
        color: white;
        border-left-color: var(--primary-color);
      }

      .nav-sub-item {
        padding-left: 1.5rem;
        font-size: 0.8rem;
      }

      /* Main Content */
      .main-content {
        flex: 1;
        margin-left: var(--sidebar-width);
        padding: 2rem;
        max-width: calc(100vw - var(--sidebar-width));
      }

      .content-header {
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border-color);
      }

      .content-header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
      }

      .content-header p {
        font-size: 1.125rem;
        color: var(--text-secondary);
        max-width: 48rem;
      }

      /* Sections */
      .section {
        margin-bottom: 3rem;
        scroll-margin-top: 2rem;
      }

      .section-header {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--border-color);
      }

      .section-header h2 {
        font-size: 1.875rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-right: 1rem;
      }

      .section-header .badge {
        background: var(--primary-color);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 500;
      }

      .section h3 {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin: 1.5rem 0 1rem 0;
      }

      .section h4 {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        margin: 1rem 0 0.75rem 0;
      }

      .section p {
        margin-bottom: 1rem;
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.7;
      }

      /* Code Blocks */
      .code-container {
        position: relative;
        margin: 1.5rem 0;
        border-radius: 0.5rem;
        overflow: hidden;
        border: 1px solid var(--border-color);
      }

      .code-header {
        background: var(--surface-color);
        padding: 0.75rem 1rem;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        justify-content: between;
        align-items: center;
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      .copy-button {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 0.25rem 0.75rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        cursor: pointer;
        transition: background-color 0.2s ease;
      }

      .copy-button:hover {
        background: #1d4ed8;
      }

      pre {
        margin: 0;
        padding: 1rem;
        background: var(--code-background) !important;
        overflow-x: auto;
        font-size: 0.875rem;
        line-height: 1.5;
      }

      code {
        font-family: 'Fira Code', 'JetBrains Mono', 'Monaco', 'Consolas',
          monospace;
      }

      /* Tables */
      .table-container {
        overflow-x: auto;
        margin: 1.5rem 0;
        border-radius: 0.5rem;
        border: 1px solid var(--border-color);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background: var(--background-color);
      }

      th {
        background: var(--surface-color);
        padding: 0.75rem 1rem;
        text-align: left;
        font-weight: 600;
        color: var(--text-primary);
        border-bottom: 1px solid var(--border-color);
        font-size: 0.875rem;
      }

      td {
        padding: 0.75rem 1rem;
        border-bottom: 1px solid var(--border-color);
        color: var(--text-secondary);
        font-size: 0.875rem;
        vertical-align: top;
      }

      td code {
        background: var(--surface-color);
        padding: 0.125rem 0.375rem;
        border-radius: 0.25rem;
        font-size: 0.8125rem;
        color: var(--primary-color);
      }

      /* Cards and Components */
      .card {
        background: var(--background-color);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        padding: 1.5rem;
        margin: 1rem 0;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
      }

      .card-header {
        margin-bottom: 1rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid var(--border-color);
      }

      .card-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.25rem;
      }

      .card-description {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      /* Tabs */
      .tab-container {
        margin: 1.5rem 0;
      }

      .tab-list {
        display: flex;
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 1rem;
      }

      .tab-button {
        background: none;
        border: none;
        padding: 0.75rem 1rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-secondary);
        cursor: pointer;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
      }

      .tab-button:hover {
        color: var(--primary-color);
      }

      .tab-button.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      /* Alerts */
      .alert {
        padding: 1rem;
        border-radius: 0.5rem;
        margin: 1rem 0;
        border-left: 4px solid;
      }

      .alert-info {
        background: #dbeafe;
        border-left-color: var(--primary-color);
        color: #1e40af;
      }

      .alert-success {
        background: #d1fae5;
        border-left-color: var(--success-color);
        color: #047857;
      }

      .alert-warning {
        background: #fef3c7;
        border-left-color: var(--warning-color);
        color: #92400e;
      }

      .alert-error {
        background: #fee2e2;
        border-left-color: var(--error-color);
        color: #dc2626;
      }

      /* Lists */
      ul {
        padding-left: 1.5rem;
        margin: 1rem 0;
      }

      li {
        margin-bottom: 0.5rem;
        color: var(--text-secondary);
      }

      li strong {
        color: var(--text-primary);
      }

      /* Mobile Responsiveness */
      @media (max-width: 768px) {
        .sidebar {
          transform: translateX(-100%);
        }

        .sidebar.open {
          transform: translateX(0);
        }

        .main-content {
          margin-left: 0;
          max-width: 100vw;
          padding: 1rem;
        }

        .content-header h1 {
          font-size: 2rem;
        }

        .section-header h2 {
          font-size: 1.5rem;
        }
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Toggle Button for Mobile */
      .toggle-sidebar {
        display: none;
        position: fixed;
        top: 1rem;
        left: 1rem;
        z-index: 1001;
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 0.5rem;
        border-radius: 0.375rem;
        font-size: 1rem;
        cursor: pointer;
      }

      @media (max-width: 768px) {
        .toggle-sidebar {
          display: block;
        }
      }

      /* Function signature styling */
      .function-signature {
        background: var(--surface-color);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        padding: 1rem;
        margin: 1rem 0;
        font-family: 'Fira Code', monospace;
        font-size: 0.875rem;
        overflow-x: auto;
      }

      .function-name {
        color: var(--primary-color);
        font-weight: 600;
      }

      .parameter {
        color: #7c3aed;
      }

      .parameter-type {
        color: var(--success-color);
      }

      .default-value {
        color: var(--warning-color);
      }
    </style>
  </head>
  <body>
    <button
      class="toggle-sidebar"
      onclick="toggleSidebar()">
      <i class="fas fa-bars"></i>
    </button>

    <div class="container">
      <!-- Sidebar Navigation -->
      <nav
        class="sidebar"
        id="sidebar">
        <div class="sidebar-header">
          <h1><i class="fas fa-chart-line"></i> Hierarchical Simulator</h1>
          <p>Comprehensive documentation for multilevel data simulation</p>
        </div>

        <div class="nav-menu">
          <div class="nav-section">
            <div class="nav-section-title">Getting Started</div>
            <a
              href="#installation"
              class="nav-item">
              <i class="fas fa-download"></i> Installation
            </a>
            <a
              href="#overview"
              class="nav-item">
              <i class="fas fa-info-circle"></i> Overview
            </a>
            <a
              href="#table-of-contents"
              class="nav-item">
              <i class="fas fa-list"></i> Quick Navigation
            </a>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">Simulation Functions</div>
            <a
              href="#simulate_continuous_data"
              class="nav-item">
              <i class="fas fa-wave-square"></i> Continuous Data
            </a>
            <a
              href="#simulate_binary_data"
              class="nav-item">
              <i class="fas fa-toggle-on"></i> Binary Data
            </a>
            <a
              href="#simulate_count_data"
              class="nav-item">
              <i class="fas fa-sort-numeric-up"></i> Count Data
            </a>
            <a
              href="#simulate_survival_data"
              class="nav-item">
              <i class="fas fa-clock"></i> Survival Data
            </a>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">Reference</div>
            <a
              href="#common-parameters"
              class="nav-item">
              <i class="fas fa-cog"></i> Common Parameters
            </a>
            <a
              href="#real-world-examples"
              class="nav-item">
              <i class="fas fa-globe"></i> Real-World Examples
            </a>
            <a
              href="#best-practices"
              class="nav-item">
              <i class="fas fa-lightbulb"></i> Best Practices
            </a>
            <a
              href="#parameter-interpretation-guide"
              class="nav-item">
              <i class="fas fa-question-circle"></i> Parameter Guide
            </a>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        <div class="content-header">
          <h1>Hierarchical Data Simulator</h1>
          <p>
            The hierarchical data simulator provides four convenient functions
            for simulating multilevel data across different outcome types. These
            functions offer an intuitive interface for generating realistic
            hierarchical data with proper range constraints.
          </p>
        </div>

        <!-- Installation Section -->
        <section
          id="installation"
          class="section">
          <div class="section-header">
            <h2>Installation Guide</h2>
            <span class="badge">Getting Started</span>
          </div>

          <div class="alert alert-info">
            <strong>Quick Start:</strong> The hierarchical simulator requires
            Python 3.8+ and can be installed via pip or from source.
          </div>

          <h3>Requirements</h3>
          <div class="card">
            <div class="card-header">
              <div class="card-title">System Requirements</div>
              <div class="card-description">
                Minimum requirements for running the simulator
              </div>
            </div>
            <ul>
              <li><strong>Python:</strong> 3.8 or higher</li>
              <li>
                <strong>Operating System:</strong> Windows, macOS, or Linux
              </li>
              <li>
                <strong>Memory:</strong> 2GB RAM minimum (4GB+ recommended for
                large simulations)
              </li>
              <li><strong>Storage:</strong> 100MB free space</li>
            </ul>
          </div>

          <h3>Core Dependencies</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Package</th>
                  <th>Version</th>
                  <th>Purpose</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>numpy</code></td>
                  <td>≥ 1.20.0</td>
                  <td>Numerical computations and random number generation</td>
                </tr>
                <tr>
                  <td><code>pandas</code></td>
                  <td>≥ 1.3.0</td>
                  <td>Data manipulation and DataFrame output</td>
                </tr>
                <tr>
                  <td><code>scipy</code></td>
                  <td>≥ 1.7.0</td>
                  <td>Statistical distributions and special functions</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3>Installation Methods</h3>
          <div class="tab-container">
            <div class="tab-list">
              <button
                class="tab-button active"
                onclick="showTab('install-pip')">
                Via pip (Recommended)
              </button>
              <button
                class="tab-button"
                onclick="showTab('install-conda')">
                Via conda
              </button>
              <button
                class="tab-button"
                onclick="showTab('install-source')">
                From Source
              </button>
              <button
                class="tab-button"
                onclick="showTab('install-dev')">
                Development Install
              </button>
            </div>

            <div
              id="install-pip"
              class="tab-content active">
              <h4>Method 1: Install via pip (Recommended)</h4>
              <p>
                The easiest way to install the hierarchical simulator is using
                pip from the Python Package Index (PyPI).
              </p>

              <div class="code-container">
                <div class="code-header">
                  Terminal/Command Prompt
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-bash"># Install the latest stable version
pip install hierarchical-simulator

# Install with optional visualization dependencies
pip install hierarchical-simulator[viz]

# Install specific version
pip install hierarchical-simulator==1.0.0</code></pre>
              </div>

              <div class="alert alert-success">
                <strong>Recommended:</strong> Use a virtual environment to avoid
                conflicts with other packages.
              </div>

              <div class="code-container">
                <div class="code-header">
                  Setting up Virtual Environment
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-bash"># Create virtual environment
python -m venv hierarchical_env

# Activate virtual environment
# On Windows:
hierarchical_env\Scripts\activate
# On macOS/Linux:
source hierarchical_env/bin/activate

# Install the package
pip install hierarchical-simulator

# Verify installation
python -c "import hierarchical_simulator; print('Installation successful!')"</code></pre>
              </div>
            </div>

            <div
              id="install-conda"
              class="tab-content">
              <h4>Method 2: Install via conda</h4>
              <p>
                If you're using Anaconda or Miniconda, you can install from the
                conda-forge channel.
              </p>

              <div class="code-container">
                <div class="code-header">
                  Terminal/Anaconda Prompt
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-bash"># Install from conda-forge
conda install -c conda-forge hierarchical-simulator

# Or create a new environment with the package
conda create -n hierarchical_env python=3.9 hierarchical-simulator -c conda-forge

# Activate the environment
conda activate hierarchical_env

# Verify installation
python -c "import hierarchical_simulator; print('Installation successful!')"</code></pre>
              </div>

              <div class="alert alert-info">
                <strong>Note:</strong> conda automatically handles dependency
                resolution and may be preferred for scientific computing
                environments.
              </div>
            </div>

            <div
              id="install-source"
              class="tab-content">
              <h4>Method 3: Install from Source</h4>
              <p>
                Install the latest development version directly from the GitHub
                repository.
              </p>

              <div class="code-container">
                <div class="code-header">
                  Terminal/Command Prompt
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-bash"># Clone the repository
git clone https://github.com/your-username/hierarchical-simulator.git
cd hierarchical-simulator

# Install in development mode
pip install -e .

# Or install with all dependencies
pip install -e .[all]

# Run tests to verify installation
python -m pytest tests/</code></pre>
              </div>

              <div class="alert alert-warning">
                <strong>Warning:</strong> Development versions may contain
                unstable features. Use stable releases for production work.
              </div>
            </div>

            <div
              id="install-dev"
              class="tab-content">
              <h4>Method 4: Development Installation</h4>
              <p>
                For contributors and developers who want to modify the source
                code.
              </p>

              <div class="code-container">
                <div class="code-header">
                  Complete Development Setup
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-bash"># Clone and setup development environment
git clone https://github.com/your-username/hierarchical-simulator.git
cd hierarchical-simulator

# Create development environment
python -m venv dev_env
source dev_env/bin/activate  # On Windows: dev_env\Scripts\activate

# Install in editable mode with all development dependencies
pip install -e .[dev,test,docs]

# Install pre-commit hooks
pre-commit install

# Run full test suite
python -m pytest tests/ --cov=hierarchical_simulator

# Build documentation locally
cd docs
make html</code></pre>
              </div>

              <h5>Development Dependencies</h5>
              <ul>
                <li><code>pytest</code> - Testing framework</li>
                <li><code>pytest-cov</code> - Coverage reporting</li>
                <li><code>black</code> - Code formatting</li>
                <li><code>flake8</code> - Code linting</li>
                <li><code>sphinx</code> - Documentation generation</li>
                <li><code>pre-commit</code> - Git hooks for code quality</li>
              </ul>
            </div>
          </div>

          <h3>Verification</h3>
          <div class="card">
            <div class="card-header">
              <div class="card-title">Test Your Installation</div>
              <div class="card-description">
                Quick verification that everything is working correctly
              </div>
            </div>

            <div class="code-container">
              <div class="code-header">
                Python Test Script
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-python">#!/usr/bin/env python3
"""
Quick installation verification script
"""
import sys

def test_installation():
    """Test that all components are working correctly."""
    
    print("Testing hierarchical simulator installation...")
    print(f"Python version: {sys.version}")
    
    try:
        # Test imports
        import hierarchical_simulator
        print(f"✓ hierarchical_simulator version: {hierarchical_simulator.__version__}")
        
        import numpy as np
        print(f"✓ numpy version: {np.__version__}")
        
        import pandas as pd
        print(f"✓ pandas version: {pd.__version__}")
        
        import scipy
        print(f"✓ scipy version: {scipy.__version__}")
        
        # Test basic functionality
        from hierarchical_simulator import simulate_continuous_data
        
        # Run a small simulation
        data, simulator = simulate_continuous_data(
            n_groups=3,
            size_range=(10, 15),
            gamma=(5.0, 2.0),
            tau=(1.0, 0.5),
            sigma=1.0,
            random_seed=42
        )
        
        print(f"✓ Generated test dataset with {len(data)} observations")
        print(f"✓ Data shape: {data.shape}")
        print(f"✓ Columns: {list(data.columns)}")
        
        # Test that outputs are reasonable
        assert len(data) > 0, "No data generated"
        assert 'outcome' in data.columns, "Missing outcome column"
        assert data['outcome'].notna().all(), "Missing values in outcome"
        
        print("\nInstallation verification successful!")
        print("You're ready to start using the hierarchical simulator!")
        
        return True
        
    except ImportError as e:
        print(f"Import error: {e}")
        print("Please check your installation and dependencies.")
        return False
        
    except Exception as e:
        print(f"Unexpected error: {e}")
        print("Installation may be incomplete or corrupted.")
        return False

if __name__ == "__main__":
    success = test_installation()
    sys.exit(0 if success else 1)</code></pre>
            </div>

            <p>
              Save this script as <code>test_installation.py</code> and run it:
            </p>
            <div class="code-container">
              <div class="code-header">
                Terminal
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-bash">python test_installation.py</code></pre>
            </div>
          </div>

          <h3>Troubleshooting</h3>
          <div class="card">
            <div class="card-header">
              <div class="card-title">Common Installation Issues</div>
              <div class="card-description">
                Solutions to frequently encountered problems
              </div>
            </div>

            <h4>Issue 1: Permission Denied Errors</h4>
            <div class="alert alert-error">
              <strong>Error:</strong>
              <code>PermissionError: [Errno 13] Permission denied</code>
            </div>
            <p>
              <strong>Solution:</strong> Use <code>--user</code> flag or virtual
              environment:
            </p>
            <div class="code-container">
              <div class="code-header">
                Fix Permission Issues
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-bash"># Install for current user only
pip install --user hierarchical-simulator

# Or use virtual environment (recommended)
python -m venv myenv
source myenv/bin/activate  # On Windows: myenv\Scripts\activate
pip install hierarchical-simulator</code></pre>
            </div>

            <h4>Issue 2: Package Not Found</h4>
            <div class="alert alert-error">
              <strong>Error:</strong>
              <code
                >No matching distribution found for hierarchical-simulator</code
              >
            </div>
            <p><strong>Solution:</strong> Update pip and check package name:</p>
            <div class="code-container">
              <div class="code-header">
                Update pip and retry
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-bash"># Update pip to latest version
python -m pip install --upgrade pip

# Try installation again
pip install hierarchical-simulator

# If still failing, try development version
pip install git+https://github.com/your-username/hierarchical-simulator.git</code></pre>
            </div>

            <h4>Issue 3: Dependency Conflicts</h4>
            <div class="alert alert-error">
              <strong>Error:</strong> Version conflicts with existing packages
            </div>
            <p><strong>Solution:</strong> Use fresh virtual environment:</p>
            <div class="code-container">
              <div class="code-header">
                Clean Environment Setup
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-bash"># Create fresh environment
python -m venv fresh_env
source fresh_env/bin/activate

# Install with specific versions if needed
pip install numpy==1.21.0 pandas==1.3.0 scipy==1.7.0
pip install hierarchical-simulator</code></pre>
            </div>

            <h4>Issue 4: Import Errors</h4>
            <div class="alert alert-error">
              <strong>Error:</strong>
              <code
                >ModuleNotFoundError: No module named
                'hierarchical_simulator'</code
              >
            </div>
            <p>
              <strong>Solution:</strong> Check Python path and installation:
            </p>
            <div class="code-container">
              <div class="code-header">
                Debug Import Issues
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-python"># Check if package is installed
import sys
import subprocess

# List installed packages
result = subprocess.run([sys.executable, '-m', 'pip', 'list'], 
                       capture_output=True, text=True)
print(result.stdout)

# Check Python path
print("Python path:")
for path in sys.path:
    print(f"  {path}")

# Try to locate the package
try:
    import hierarchical_simulator
    print(f"Package location: {hierarchical_simulator.__file__}")
except ImportError as e:
    print(f"Import failed: {e}")</code></pre>
            </div>
          </div>

          <h3>Docker Installation</h3>
          <div class="card">
            <div class="card-header">
              <div class="card-title">Containerized Environment</div>
              <div class="card-description">
                Run the simulator in an isolated Docker container
              </div>
            </div>

            <div class="code-container">
              <div class="code-header">
                Dockerfile
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-dockerfile">FROM python:3.9-slim

# Set working directory
WORKDIR /app

# Install system dependencies
RUN apt-get update && apt-get install -y \
    gcc \
    g++ \
    && rm -rf /var/lib/apt/lists/*

# Install Python dependencies
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Install hierarchical simulator
RUN pip install hierarchical-simulator

# Copy your scripts
COPY . .

# Set default command
CMD ["python", "-c", "import hierarchical_simulator; print('Ready to simulate!')"]</code></pre>
            </div>

            <div class="code-container">
              <div class="code-header">
                Docker Commands
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-bash"># Build the image
docker build -t hierarchical-simulator .

# Run interactive container
docker run -it hierarchical-simulator python

# Mount local directory for data exchange
docker run -v $(pwd):/data -it hierarchical-simulator python</code></pre>
            </div>
          </div>

          <h3>Jupyter Notebook Setup</h3>
          <div class="card">
            <div class="card-header">
              <div class="card-title">Interactive Analysis Environment</div>
              <div class="card-description">
                Set up Jupyter for interactive simulation and analysis
              </div>
            </div>

            <div class="code-container">
              <div class="code-header">
                Jupyter Installation
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-bash"># Install Jupyter with the simulator
pip install hierarchical-simulator jupyter matplotlib seaborn

# Create a new notebook
jupyter notebook

# Or use JupyterLab
pip install jupyterlab
jupyter lab</code></pre>
            </div>

            <div class="code-container">
              <div class="code-header">
                First Notebook Cell
                <button
                  class="copy-button"
                  onclick="copyCode(this)">
                  Copy
                </button>
              </div>
              <pre><code class="language-python"># Import required libraries
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Import the simulator
from hierarchical_simulator import (
    simulate_continuous_data,
    simulate_binary_data, 
    simulate_count_data,
    simulate_survival_data,
    LinkFunction
)

# Configure plotting
plt.style.use('seaborn-v0_8')
sns.set_palette("husl")

print("Hierarchical Simulator ready for use!")</code></pre>
            </div>
          </div>

          <div class="alert alert-success">
            <strong>Installation Complete!</strong> You're now ready to start
            simulating hierarchical data. Head to the
            <a
              href="#simulate_continuous_data"
              style="color: inherit; font-weight: bold"
              >simulation functions</a
            >
            to get started.
          </div>
        </section>

        <!-- Overview Section -->
        <section
          id="overview"
          class="section">
          <div class="section-header">
            <h2>Introduction</h2>
            <span class="badge">v1.0</span>
          </div>
          <div class="alert alert-info">
            <strong>Key Features:</strong> Generate realistic hierarchical
            datasets for continuous, binary, count, and survival outcomes with
            customizable parameters and range constraints.
          </div>
          <p>
            This comprehensive simulator enables researchers, statisticians, and
            data scientists to create realistic multilevel datasets for testing
            statistical methods, power analysis, and educational purposes. Each
            function is designed with domain-specific considerations and
            realistic parameter ranges.
          </p>

          <div class="alert alert-success">
            <strong>New to the simulator?</strong> Start with the
            <a
              href="#installation"
              style="color: inherit; font-weight: bold"
              >Installation Guide</a
            >
            above, then explore the
            <a
              href="#table-of-contents"
              style="color: inherit; font-weight: bold"
              >simulation functions</a
            >
            below.
          </div>
        </section>

        <!-- Table of Contents -->
        <section
          id="table-of-contents"
          class="section">
          <div class="section-header">
            <h2>Quick Navigation</h2>
          </div>
          <div class="card">
            <div class="card-header">
              <div class="card-title">Available Functions</div>
              <div class="card-description">
                Jump to specific function documentation
              </div>
            </div>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1rem;
              ">
              <a
                href="#simulate_continuous_data"
                style="text-decoration: none">
                <div
                  class="card"
                  style="
                    margin: 0;
                    border-color: var(--primary-color);
                    transition: transform 0.2s ease;
                  ">
                  <h4 style="color: var(--primary-color); margin-top: 0">
                    <i class="fas fa-wave-square"></i>
                    simulate_continuous_data()
                  </h4>
                  <p style="margin-bottom: 0; font-size: 0.875rem">
                    Gaussian hierarchical data with range constraints
                  </p>
                </div>
              </a>
              <a
                href="#simulate_binary_data"
                style="text-decoration: none">
                <div
                  class="card"
                  style="
                    margin: 0;
                    border-color: var(--success-color);
                    transition: transform 0.2s ease;
                  ">
                  <h4 style="color: var(--success-color); margin-top: 0">
                    <i class="fas fa-toggle-on"></i> simulate_binary_data()
                  </h4>
                  <p style="margin-bottom: 0; font-size: 0.875rem">
                    Bernoulli data with logistic, probit, or cloglog models
                  </p>
                </div>
              </a>
              <a
                href="#simulate_count_data"
                style="text-decoration: none">
                <div
                  class="card"
                  style="
                    margin: 0;
                    border-color: var(--warning-color);
                    transition: transform 0.2s ease;
                  ">
                  <h4 style="color: var(--warning-color); margin-top: 0">
                    <i class="fas fa-sort-numeric-up"></i> simulate_count_data()
                  </h4>
                  <p style="margin-bottom: 0; font-size: 0.875rem">
                    Poisson/Negative-Binomial with count constraints
                  </p>
                </div>
              </a>
              <a
                href="#simulate_survival_data"
                style="text-decoration: none">
                <div
                  class="card"
                  style="
                    margin: 0;
                    border-color: var(--error-color);
                    transition: transform 0.2s ease;
                  ">
                  <h4 style="color: var(--error-color); margin-top: 0">
                    <i class="fas fa-clock"></i> simulate_survival_data()
                  </h4>
                  <p style="margin-bottom: 0; font-size: 0.875rem">
                    Time-to-event data with exponential survival times
                  </p>
                </div>
              </a>
            </div>
          </div>
        </section>

        <!-- Continuous Data Function -->
        <section
          id="simulate_continuous_data"
          class="section">
          <div class="section-header">
            <h2>simulate_continuous_data()</h2>
            <span class="badge">Gaussian</span>
          </div>

          <p>
            Simulates continuous (Gaussian) hierarchical data with optional
            range constraints.
          </p>

          <h3>Function Signature</h3>
          <div class="function-signature">
            <span class="function-name">simulate_continuous_data</span>(
            <span class="parameter">n_groups</span>:
            <span class="parameter-type">int</span> =
            <span class="default-value">10</span>,
            <span class="parameter">size_range</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(15, 40)</span>,
            <span class="parameter">gamma</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(0.0, 2.0)</span>,
            <span class="parameter">tau</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(1.0, 0.5, 0.0)</span>,
            <span class="parameter">sigma</span>:
            <span class="parameter-type">float</span> =
            <span class="default-value">1.0</span>,
            <span class="parameter">predictor_range</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(0.0, 1.0)</span>,
            <span class="parameter">outcome_range</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">None</span>,
            <span class="parameter">truncation_method</span>:
            <span class="parameter-type">str</span> =
            <span class="default-value">"clip"</span>,
            <span class="parameter">random_seed</span>:
            <span class="parameter-type">int</span> =
            <span class="default-value">0</span>, **kwargs ) ->
            Tuple[pd.DataFrame, HierarchicalDataSimulator]
          </div>

          <h3>Parameters</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Type</th>
                  <th>Default</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>n_groups</code></td>
                  <td>int</td>
                  <td>10</td>
                  <td>Number of groups (e.g., schools, clinics, sites)</td>
                </tr>
                <tr>
                  <td><code>size_range</code></td>
                  <td>tuple</td>
                  <td>(15, 40)</td>
                  <td>Range of group sizes (min_size, max_size)</td>
                </tr>
                <tr>
                  <td><code>gamma</code></td>
                  <td>tuple</td>
                  <td>(0.0, 2.0)</td>
                  <td>Fixed effects (intercept, slope)</td>
                </tr>
                <tr>
                  <td><code>tau</code></td>
                  <td>tuple</td>
                  <td>(1.0, 0.5, 0.0)</td>
                  <td>Random effects (tau_00, tau_11, tau_01)</td>
                </tr>
                <tr>
                  <td><code>sigma</code></td>
                  <td>float</td>
                  <td>1.0</td>
                  <td>Within-group error standard deviation</td>
                </tr>
                <tr>
                  <td><code>predictor_range</code></td>
                  <td>tuple</td>
                  <td>(0.0, 1.0)</td>
                  <td>Range of predictor variable values</td>
                </tr>
                <tr>
                  <td><code>outcome_range</code></td>
                  <td>tuple</td>
                  <td>None</td>
                  <td>
                    Valid outcome range (min, max). If None, no constraints
                  </td>
                </tr>
                <tr>
                  <td><code>truncation_method</code></td>
                  <td>str</td>
                  <td>"clip"</td>
                  <td>
                    How to handle out-of-bounds values: "clip", "reflect",
                    "resample"
                  </td>
                </tr>
                <tr>
                  <td><code>random_seed</code></td>
                  <td>int</td>
                  <td>0</td>
                  <td>Random seed for reproducibility</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3>Returns</h3>
          <p>
            <strong>Tuple[pd.DataFrame, HierarchicalDataSimulator]</strong> with
            simulated continuous data containing:
          </p>
          <ul>
            <li><code>group</code>: Group identifier (1, 2, 3, ...)</li>
            <li>
              <code>observation</code>: Observation within group (1, 2, 3, ...)
            </li>
            <li><code>predictor</code>: Predictor variable value</li>
            <li>
              <code>linear_predictor</code>: Linear predictor (before adding
              error)
            </li>
            <li><code>true_beta_0</code>: True group-specific intercept</li>
            <li><code>true_beta_1</code>: True group-specific slope</li>
            <li><code>outcome</code>: Generated continuous outcome</li>
          </ul>

          <h3>Examples</h3>
          <div class="tab-container">
            <div class="tab-list">
              <button
                class="tab-button active"
                onclick="showTab('continuous-example-1')">
                School Test Scores
              </button>
              <button
                class="tab-button"
                onclick="showTab('continuous-example-2')">
                Blood Pressure Study
              </button>
              <button
                class="tab-button"
                onclick="showTab('continuous-example-3')">
                Psychological Scale
              </button>
            </div>

            <div
              id="continuous-example-1"
              class="tab-content active">
              <h4>Example 1: School Test Scores (0-100 scale)</h4>
              <div class="code-container">
                <div class="code-header">
                  Python
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-python">from hierarchical_simulator import simulate_continuous_data

# School performance across 12 schools
school_scores, _ = simulate_continuous_data(
    n_groups=12,                    # 12 schools
    size_range=(20, 40),           # 20-40 students per school
    gamma=(75.0, 15.0),            # Mean score=75, intervention effect=+15
    tau=(8.0, 4.0, -0.3),          # School variation with negative correlation
    sigma=12.0,                    # Individual student variation
    outcome_range=(0, 100),        # Valid score range
    truncation_method="resample",  # Preserve distribution shape
    predictor_range=(0.0, 1.0),    # 0=control, 1=intervention
    random_seed=42
)

print(f"Generated {len(school_scores)} student scores")
print(f"Score range: {school_scores['outcome'].min():.1f} - {school_scores['outcome'].max():.1f}")
print(f"Mean score: {school_scores['outcome'].mean():.1f}")

# Analyze intervention effect
control_mean = school_scores[school_scores['predictor'] < 0.5]['outcome'].mean()
intervention_mean = school_scores[school_scores['predictor'] > 0.5]['outcome'].mean()
print(f"Control mean: {control_mean:.1f}")
print(f"Intervention mean: {intervention_mean:.1f}")
print(f"Effect size: {intervention_mean - control_mean:.1f} points")</code></pre>
              </div>
            </div>

            <div
              id="continuous-example-2"
              class="tab-content">
              <h4>Example 2: Blood Pressure Study</h4>
              <div class="code-container">
                <div class="code-header">
                  Python
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-python"># Multi-clinic blood pressure treatment study
bp_study, _ = simulate_continuous_data(
    n_groups=8,                     # 8 clinics
    size_range=(30, 50),           # 30-50 patients per clinic
    gamma=(140.0, -18.0),          # Baseline BP=140, treatment effect=-18 mmHg
    tau=(12.0, 5.0, -0.4),         # Clinic variation
    sigma=15.0,                    # Individual patient variation
    outcome_range=(80, 200),       # Physiological BP range
    truncation_method="reflect",   # Reflect extreme values back
    predictor_range=(0.0, 1.0),    # 0=placebo, 1=treatment
    random_seed=123
)

print(f"BP study: {len(bp_study)} patients across {bp_study['group'].nunique()} clinics")
print(f"BP range: {bp_study['outcome'].min():.1f} - {bp_study['outcome'].max():.1f} mmHg")</code></pre>
              </div>
            </div>

            <div
              id="continuous-example-3"
              class="tab-content">
              <h4>Example 3: Psychological Scale (No Range Constraints)</h4>
              <div class="code-container">
                <div class="code-header">
                  Python
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-python"># Depression scale scores (continuous, no natural bounds)
depression_study = simulate_continuous_data(
    n_groups=15,                   # 15 therapy groups
    size_range=(8, 15),           # Smaller therapy groups
    gamma=(25.0, -8.0),           # Baseline depression=25, therapy effect=-8
    tau=(6.0, 3.0, 0.2),          # Therapist variation
    sigma=10.0,                   # Individual variation
    # No outcome_range - depression scales can vary widely
    predictor_range=(0.0, 1.0),   # 0=control, 1=therapy
    random_seed=456
)</code></pre>
              </div>
            </div>
          </div>
        </section>

        <!-- Binary Data Function -->
        <section
          id="simulate_binary_data"
          class="section">
          <div class="section-header">
            <h2>simulate_binary_data()</h2>
            <span class="badge">Bernoulli</span>
          </div>

          <p>
            Simulates binary (Bernoulli) hierarchical data using logistic,
            probit, or complementary log-log models.
          </p>

          <h3>Function Signature</h3>
          <div class="function-signature">
            <span class="function-name">simulate_binary_data</span>(
            <span class="parameter">n_groups</span>:
            <span class="parameter-type">int</span> =
            <span class="default-value">10</span>,
            <span class="parameter">size_range</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(15, 40)</span>,
            <span class="parameter">gamma</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(0.5, 1.2)</span>,
            <span class="parameter">tau</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(0.8, 0.6, -0.3)</span>,
            <span class="parameter">link_function</span>:
            <span class="parameter-type">LinkFunction</span> =
            <span class="default-value">LinkFunction.LOGIT</span>,
            <span class="parameter">predictor_range</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(0.0, 1.0)</span>,
            <span class="parameter">random_seed</span>:
            <span class="parameter-type">int</span> =
            <span class="default-value">0</span>, **kwargs ) ->
            Tuple[pd.DataFrame, HierarchicalDataSimulator]
          </div>

          <h3>Parameters</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Type</th>
                  <th>Default</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>n_groups</code></td>
                  <td>int</td>
                  <td>10</td>
                  <td>Number of groups</td>
                </tr>
                <tr>
                  <td><code>size_range</code></td>
                  <td>tuple</td>
                  <td>(15, 40)</td>
                  <td>Range of group sizes</td>
                </tr>
                <tr>
                  <td><code>gamma</code></td>
                  <td>tuple</td>
                  <td>(0.5, 1.2)</td>
                  <td>Fixed effects on link scale (intercept, slope)</td>
                </tr>
                <tr>
                  <td><code>tau</code></td>
                  <td>tuple</td>
                  <td>(0.8, 0.6, -0.3)</td>
                  <td>Random effects (tau_00, tau_11, tau_01)</td>
                </tr>
                <tr>
                  <td><code>link_function</code></td>
                  <td>LinkFunction</td>
                  <td>LOGIT</td>
                  <td>Link function: LOGIT, PROBIT, or CLOGLOG</td>
                </tr>
                <tr>
                  <td><code>predictor_range</code></td>
                  <td>tuple</td>
                  <td>(0.0, 1.0)</td>
                  <td>Range of predictor values</td>
                </tr>
                <tr>
                  <td><code>random_seed</code></td>
                  <td>int</td>
                  <td>0</td>
                  <td>Random seed for reproducibility</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3>Returns</h3>
          <p><strong>pandas.DataFrame</strong> with columns:</p>
          <ul>
            <li><code>group</code>: Group identifier</li>
            <li><code>observation</code>: Observation within group</li>
            <li><code>predictor</code>: Predictor variable value</li>
            <li>
              <code>linear_predictor</code>: Linear predictor (on link scale)
            </li>
            <li><code>true_beta_0</code>: True group-specific intercept</li>
            <li><code>true_beta_1</code>: True group-specific slope</li>
            <li><code>outcome</code>: Generated binary outcome (0 or 1)</li>
          </ul>

          <h3>Examples</h3>
          <div class="tab-container">
            <div class="tab-list">
              <button
                class="tab-button active"
                onclick="showTab('binary-example-1')">
                Medical Treatment
              </button>
              <button
                class="tab-button"
                onclick="showTab('binary-example-2')">
                Graduation Rates
              </button>
              <button
                class="tab-button"
                onclick="showTab('binary-example-3')">
                Equipment Failure
              </button>
            </div>

            <div
              id="binary-example-1"
              class="tab-content active">
              <h4>Example 1: Medical Treatment Success (Logistic Model)</h4>
              <div class="code-container">
                <div class="code-header">
                  Python
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-python">from hierarchical_simulator import simulate_binary_data, LinkFunction

# Treatment success across hospitals
treatment_success, _ = simulate_binary_data(
    n_groups=10,                   # 10 hospitals
    size_range=(25, 50),          # 25-50 patients per hospital
    gamma=(0.2, 1.5),             # Log-odds: modest baseline, strong treatment effect
    tau=(0.8, 0.6, -0.2),         # Hospital variation
    link_function=LinkFunction.LOGIT,  # Logistic regression
    predictor_range=(0.0, 1.0),   # 0=standard care, 1=new treatment
    random_seed=789
)

print(f"Treatment study: {len(treatment_success)} patients")
print(f"Overall success rate: {treatment_success['outcome'].mean():.1%}")

# Calculate odds ratio
treatment_group = (treatment_success['predictor'] > 0.5).astype(int)
outcome = treatment_success['outcome']

# Calculate success rates by group
control_success = outcome[treatment_group == 0].mean()
treatment_success_rate = outcome[treatment_group == 1].mean()

print(f"Control success rate: {control_success:.1%}")
print(f"Treatment success rate: {treatment_success_rate:.1%}")

# Calculate odds ratio
control_odds = control_success / (1 - control_success)
treatment_odds = treatment_success_rate / (1 - treatment_success_rate)
odds_ratio = treatment_odds / control_odds
print(f"Odds ratio: {odds_ratio:.2f}")</code></pre>
              </div>
            </div>

            <div
              id="binary-example-2"
              class="tab-content">
              <h4>Example 2: Educational Graduation Rates (Probit Model)</h4>
              <div class="code-container">
                <div class="code-header">
                  Python
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-python"># High school graduation across school districts
graduation_study, _ = simulate_binary_data(
    n_groups=20,                   # 20 school districts
    size_range=(100, 200),        # Large sample sizes for graduation rates
    gamma=(-0.2, 0.8),            # Probit scale: slightly below average baseline
    tau=(0.5, 0.3, 0.1),          # District variation
    link_function=LinkFunction.PROBIT,  # Probit model (normal CDF)
    predictor_range=(0.0, 1.0),   # 0=standard program, 1=enhanced program
    random_seed=321
)

print(f"Graduation study: {len(graduation_study)} students")
print(f"Overall graduation rate: {graduation_study['outcome'].mean():.1%}")</code></pre>
              </div>
            </div>

            <div
              id="binary-example-3"
              class="tab-content">
              <h4>Example 3: Equipment Failure (Complementary Log-Log)</h4>
              <div class="code-container">
                <div class="code-header">
                  Python
                  <button
                    class="copy-button"
                    onclick="copyCode(this)">
                    Copy
                  </button>
                </div>
                <pre><code class="language-python"># Equipment failure analysis
failure_study, _ = simulate_binary_data(
    n_groups=8,                    # 8 manufacturing plants
    size_range=(50, 80),          # Equipment units per plant
    gamma=(-2.5, 1.2),            # Cloglog scale: low baseline failure rate
    tau=(0.6, 0.4, -0.1),         # Plant variation
    link_function=LinkFunction.CLOGLOG,  # Complementary log-log
    predictor_range=(0.0, 10.0),  # Operating hours (in thousands)
    random_seed=654
)

print(f"Failure study: {len(failure_study)} equipment units")
print(f"Overall failure rate: {failure_study['outcome'].mean():.1%}")</code></pre>
              </div>
            </div>
          </div>
        </section>

        <!-- Count Data Function -->
        <section
          id="simulate_count_data"
          class="section">
          <div class="section-header">
            <h2>simulate_count_data()</h2>
            <span class="badge">Poisson/NB</span>
          </div>

          <p>
            Simulates count data using Poisson or Negative-Binomial
            distributions with optional maximum count constraints.
          </p>

          <h3>Function Signature</h3>
          <div class="function-signature">
            <span class="function-name">simulate_count_data</span>(
            <span class="parameter">n_groups</span>:
            <span class="parameter-type">int</span> =
            <span class="default-value">8</span>,
            <span class="parameter">size_range</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(15, 40)</span>,
            <span class="parameter">gamma</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(1.0, -0.5)</span>,
            <span class="parameter">tau</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(0.7, 0.4, 0.2)</span>,
            <span class="parameter">dispersion</span>:
            <span class="parameter-type">float</span> =
            <span class="default-value">1.0</span>,
            <span class="parameter">link_function</span>:
            <span class="parameter-type">LinkFunction</span> =
            <span class="default-value">LinkFunction.LOG</span>,
            <span class="parameter">predictor_range</span>:
            <span class="parameter-type">tuple</span> =
            <span class="default-value">(0.0, 1.0)</span>,
            <span class="parameter">max_count</span>:
            <span class="parameter-type">int</span> =
            <span class="default-value">None</span>,
            <span class="parameter">random_seed</span>:
            <span class="parameter-type">int</span> =
            <span class="default-value">0</span>, **kwargs ) ->
            Tuple[pd.DataFrame, HierarchicalDataSimulator]
          </div>

          <div class="alert alert-info">
            <strong>Note:</strong> When <code>dispersion = 1.0</code>, the
            function generates Poisson data. Values > 1.0 create overdispersed
            Negative-Binomial data.
          </div>

          <!-- Similar structure for count data parameters and examples -->
        </section>

        <!-- Survival Data Function -->
        <section
          id="simulate_survival_data"
          class="section">
          <div class="section-header">
            <h2>simulate_survival_data()</h2>
            <span class="badge">Time-to-Event</span>
          </div>

          <p>
            Simulates time-to-event (survival) data with exponential survival
            times and optional time range constraints.
          </p>

          <!-- Similar structure for survival data -->
        </section>

        <!-- Common Parameters Section -->
        <section
          id="common-parameters"
          class="section">
          <div class="section-header">
            <h2>Common Parameters</h2>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title">Fixed Effects (gamma)</div>
              <div class="card-description">
                Population-level effects specification
              </div>
            </div>
            <p>
              The <code>gamma</code> parameter specifies the population-level
              effects:
            </p>
            <ul>
              <li>
                <strong>gamma[0]</strong>: Intercept (baseline level when
                predictor = 0)
              </li>
              <li>
                <strong>gamma[1]</strong>: Slope (effect of one-unit increase in
                predictor)
              </li>
            </ul>

            <h4>Scale depends on outcome type:</h4>
            <ul>
              <li><strong>Continuous</strong>: Natural scale of the outcome</li>
              <li>
                <strong>Binary</strong>: Log-odds scale (logit) or probit scale
              </li>
              <li><strong>Count</strong>: Log-rate scale</li>
              <li><strong>Survival</strong>: Log-hazard scale</li>
            </ul>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title">Random Effects (tau)</div>
              <div class="card-description">
                Group-level variation specification
              </div>
            </div>
            <p>The <code>tau</code> parameter can be specified as:</p>
            <ul>
              <li>
                <strong>2-tuple</strong>: <code>(tau_00, tau_11)</code> -
                assumes no correlation (<code>tau_01 = 0</code>)
              </li>
              <li>
                <strong>3-tuple</strong>:
                <code>(tau_00, tau_11, tau_01)</code> - includes correlation
              </li>
            </ul>

            <p>Where:</p>
            <ul>
              <li>
                <strong>tau_00</strong>: Standard deviation of random intercepts
              </li>
              <li>
                <strong>tau_11</strong>: Standard deviation of random slopes
              </li>
              <li>
                <strong>tau_01</strong>: Correlation between random intercepts
                and slopes (-1 to 1)
              </li>
            </ul>
          </div>
        </section>

        <!-- Best Practices Section -->
        <section
          id="best-practices"
          class="section">
          <div class="section-header">
            <h2>Best Practices</h2>
          </div>

          <div class="alert alert-success">
            <strong>Pro Tip:</strong> Always start with realistic baseline
            parameters for your domain, then adjust effect sizes and random
            effects based on your research questions.
          </div>

          <h3>1. Parameter Selection</h3>
          <p><strong>Start with realistic baselines:</strong></p>
          <div class="code-container">
            <div class="code-header">
              Python
              <button
                class="copy-button"
                onclick="copyCode(this)">
                Copy
              </button>
            </div>
            <pre><code class="language-python"># For test scores (0-100 scale)
gamma=(75.0, 10.0)  # 75% baseline, 10-point intervention effect

# For medical success rates
gamma=(0.2, 1.0)    # 55% baseline success rate, OR≈2.7 for treatment

# For count data (daily events)
gamma=(2.0, -0.5)   # ~7 baseline events, 40% reduction</code></pre>
          </div>

          <h3>2. Sample Size Considerations</h3>
          <p><strong>Power for detecting group-level effects:</strong></p>
          <div class="code-container">
            <div class="code-header">
              Python
              <button
                class="copy-button"
                onclick="copyCode(this)">
                Copy
              </button>
            </div>
            <pre><code class="language-python"># Smaller studies (pilot/feasibility)
n_groups=6, size_range=(15, 25)

# Typical studies
n_groups=10, size_range=(20, 40)

# Large studies (definitive trials)
n_groups=20, size_range=(50, 100)</code></pre>
          </div>

          <h3>3. Reproducibility</h3>
          <div class="alert alert-warning">
            <strong>Always set random seeds</strong> for reproducible results
            across runs and different scenarios.
          </div>
        </section>

        <!-- Parameter Interpretation Guide -->
        <section
          id="parameter-interpretation-guide"
          class="section">
          <div class="section-header">
            <h2>Parameter Interpretation Guide</h2>
          </div>

          <h3>Continuous Outcomes</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Parameter</th>
                  <th>Interpretation</th>
                  <th>Typical Values</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>gamma[0]</code></td>
                  <td>Mean outcome when predictor=0</td>
                  <td>Domain-specific</td>
                </tr>
                <tr>
                  <td><code>gamma[1]</code></td>
                  <td>Change in mean per unit predictor</td>
                  <td>Effect size of interest</td>
                </tr>
                <tr>
                  <td><code>tau[0]</code></td>
                  <td>SD of group means</td>
                  <td>10-30% of gamma[0]</td>
                </tr>
                <tr>
                  <td><code>tau[1]</code></td>
                  <td>SD of group slopes</td>
                  <td>25-75% of gamma[1]</td>
                </tr>
                <tr>
                  <td><code>sigma</code></td>
                  <td>Within-group SD</td>
                  <td>50-150% of tau[0]</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title">Example Interpretation</div>
              <div class="card-description">
                Test scores with gamma=(75, 10), tau=(8, 4), sigma=12
              </div>
            </div>
            <ul>
              <li>Average score = 75 points</li>
              <li>Intervention effect = 10 points</li>
              <li>Schools vary by ±8 points in average scores</li>
              <li>School intervention effects vary by ±4 points</li>
              <li>Individual students vary by ±12 points within schools</li>
            </ul>
          </div>
        </section>

        <!-- Real World Examples -->
        <section
          id="real-world-examples"
          class="section">
          <div class="section-header">
            <h2>Real-World Examples</h2>
          </div>

          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
              gap: 1.5rem;
            ">
            <div class="card">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-graduation-cap"></i> Education Research
                </div>
              </div>
              <p>
                Multi-site educational intervention with test scores ranging
                0-100.
              </p>
              <div class="code-container">
                <pre><code class="language-python">education_study = simulate_continuous_data(
    n_groups=20,           # 20 schools
    size_range=(80, 120),  # 80-120 students
    gamma=(72.0, 8.0),     # Test scores
    tau=(12.0, 6.0, -0.4), # School variation
    sigma=18.0,            # Student variation
    outcome_range=(0, 100),
    random_seed=100
)</code></pre>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-hospital"></i> Healthcare Analytics
                </div>
              </div>
              <p>Hospital readmission rates across multiple facilities.</p>
              <div class="code-container">
                <pre><code class="language-python">readmission_study = simulate_binary_data(
    n_groups=25,           # 25 hospitals
    size_range=(200, 400), # Large samples
    gamma=(-1.2, 0.6),     # Log-odds
    tau=(0.4, 0.2, 0.0),   # Hospital variation
    link_function=LinkFunction.LOGIT,
    random_seed=200
)</code></pre>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-virus"></i> Public Health
                </div>
              </div>
              <p>Disease outbreak monitoring across geographic regions.</p>
              <div class="code-container">
                <pre><code class="language-python">outbreak_surveillance = simulate_count_data(
    n_groups=30,           # 30 regions
    size_range=(40, 60),   # Weekly observations
    gamma=(1.2, 1.8),      # Log-rate
    tau=(0.7, 0.4, 0.3),   # Regional variation
    dispersion=3.0,        # High overdispersion
    max_count=200,         # Capacity limit
    random_seed=300
)</code></pre>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <div class="card-title">
                  <i class="fas fa-pills"></i> Clinical Trials
                </div>
              </div>
              <p>Time-to-recovery in multi-site clinical trial.</p>
              <div class="code-container">
                <pre><code class="language-python">recovery_trial = simulate_survival_data(
    n_groups=6,            # 6 treatment sites
    size_range=(50, 80),   # Patients per site
    gamma=(-2.0, 0.7),     # Log-hazard
    tau=(0.3, 0.2, 0.1),   # Site variation
    censoring_time=180,    # 6-month follow-up
    time_range=(1, 365),   # Recovery window
    random_seed=400
)</code></pre>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script>
      // Navigation functionality
      function updateActiveNav() {
        const sections = document.querySelectorAll('.section')
        const navItems = document.querySelectorAll('.nav-item')

        let current = ''
        sections.forEach((section) => {
          const sectionTop = section.offsetTop
          const sectionHeight = section.clientHeight
          if (window.pageYOffset >= sectionTop - 100) {
            current = section.getAttribute('id')
          }
        })

        navItems.forEach((item) => {
          item.classList.remove('active')
          if (item.getAttribute('href') === '#' + current) {
            item.classList.add('active')
          }
        })
      }

      // Tab functionality
      function showTab(tabId) {
        // Hide all tab contents
        const allTabContents = document.querySelectorAll('.tab-content')
        allTabContents.forEach((content) => {
          content.classList.remove('active')
        })

        // Remove active class from all tab buttons
        const allTabButtons = document.querySelectorAll('.tab-button')
        allTabButtons.forEach((button) => {
          button.classList.remove('active')
        })

        // Show selected tab content
        document.getElementById(tabId).classList.add('active')

        // Add active class to clicked button
        event.target.classList.add('active')
      }

      // Copy code functionality
      function copyCode(button) {
        const codeBlock = button
          .closest('.code-container')
          .querySelector('code')
        const text = codeBlock.textContent

        navigator.clipboard.writeText(text).then(() => {
          const originalText = button.textContent
          button.textContent = 'Copied!'
          button.style.background = 'var(--success-color)'

          setTimeout(() => {
            button.textContent = originalText
            button.style.background = 'var(--primary-color)'
          }, 2000)
        })
      }

      // Sidebar toggle for mobile
      function toggleSidebar() {
        const sidebar = document.getElementById('sidebar')
        sidebar.classList.toggle('open')
      }

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault()
          const target = document.querySelector(this.getAttribute('href'))
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            })
          }
        })
      })

      // Card hover effects
      document.querySelectorAll('.card').forEach((card) => {
        if (card.closest('a')) {
          card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-2px)'
            card.style.boxShadow = '0 4px 12px 0 rgba(0, 0, 0, 0.15)'
          })

          card.addEventListener('mouseleave', () => {
            card.style.transform = 'translateY(0)'
            card.style.boxShadow = '0 1px 3px 0 rgba(0, 0, 0, 0.1)'
          })
        }
      })

      // Event listeners
      window.addEventListener('scroll', updateActiveNav)
      window.addEventListener('load', updateActiveNav)

      // Close sidebar when clicking outside on mobile
      document.addEventListener('click', (e) => {
        const sidebar = document.getElementById('sidebar')
        const toggleButton = document.querySelector('.toggle-sidebar')

        if (
          window.innerWidth <= 768 &&
          !sidebar.contains(e.target) &&
          !toggleButton.contains(e.target) &&
          sidebar.classList.contains('open')
        ) {
          sidebar.classList.remove('open')
        }
      })

      // Initialize Prism.js for syntax highlighting
      Prism.highlightAll()
    </script>
  </body>
</html>
